import { ref } from 'vue-demi';
import { tryOnScopeDispose } from '@vueuse/shared';

function useRTDB(docRef, options = {}) {
  const {
    autoDispose = true
  } = options;
  const data = ref(void 0);
  function update(snapshot) {
    data.value = snapshot.val();
  }
  docRef.on("value", update);
  if (autoDispose) {
    tryOnScopeDispose(() => {
      docRef.off("value", update);
    });
  }
  return data;
}

export { useRTDB };
